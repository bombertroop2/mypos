<td colspan="6">
    <button type="button" class="close cancel" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
    <div style="padding-top: 20px"></div>

    <dl class="dl-horizontal">
        <dt>Code</dt>
        <dd><%= object.code %></dd>
    </dl>

    <dl class="dl-horizontal">
        <dt>Name</dt>
        <dd><%= object.name %></dd>
    </dl>

    <dl class="dl-horizontal">
        <dt>Start time</dt>
        <dd><%= object.start_date_time.strftime("%d/%m/%Y %H:%M") %></dd>
    </dl>

    <dl class="dl-horizontal">
        <dt>End time</dt>
        <dd><%= object.end_date_time.strftime("%d/%m/%Y %H:%M") %></dd>
    </dl>

    <% if object.first_plus_discount.present? %>
      <dl class="dl-horizontal">
          <dt>First discount</dt>
          <dd><%= object.first_plus_discount %>%</dd>
      </dl>

      <% if object.second_plus_discount.present? %>
        <dl class="dl-horizontal">
            <dt>Second discount</dt>
            <dd><%= object.second_plus_discount %>%</dd>
        </dl>
      <% end %>
    <% elsif object.cash_discount.present? %>
      <dl class="dl-horizontal">
          <dt>Discount amount</dt>
          <dd><%= number_to_currency(object.cash_discount, :separator => ",", :delimiter => ".", :unit => "Rp", :precision => 2) %></dd>
      </dl>
    <% elsif object.special_price.present? %>
      <dl class="dl-horizontal">
          <dt>Special price</dt>
          <dd><%= number_to_currency(object.special_price, :separator => ",", :delimiter => ".", :unit => "Rp", :precision => 2) %></dd>
      </dl>
    <% end %>

    <% event_warehouses = object.event_warehouses.joins(:warehouse).includes(event_products: [product: :brand]).select(:id, :code, :name, :minimum_purchase_amount, :discount_amount) %>
    <% if event_warehouses.length > 0 %>
      <table class="table table-striped">
          <thead>
              <tr>
                  <th>No.</th>
                  <th>Warehouse</th>
                  <% if object.reward_system? %>
                    <th>Minimum purchase amount</th>
                    <th>Discount amount</th>
                    <th>Gift items</th>
                  <% else %>
                    <th>Product</th>
                  <% end %>
              </tr>
          </thead>
          <tbody>
              <% event_warehouses.each_with_index do |event_warehouse, index| %>
                <tr>
                    <td><%= index + 1 %></td>
                    <td><%= "#{event_warehouse.code} - #{event_warehouse.name}" %></td>
                    <% if object.reward_system? %>
                      <td><%= number_to_currency(event_warehouse.minimum_purchase_amount, :separator => ",", :delimiter => ".", :unit => "Rp", :precision => 2) %></td>
                      <td><%= number_to_currency(event_warehouse.discount_amount, :separator => ",", :delimiter => ".", :unit => "Rp", :precision => 2) %></td>
                    <% end %>
                    <td>
                        <% event_products = event_warehouse.event_products %>
                        <% if event_products.length > 0 %>
                          <table class="table table-striped">
                              <thead>
                                  <tr>
                                      <th>No.</th>
                                      <th>Code</th>
                                      <th>Name</th>
                                  </tr>
                              </thead>
                              <tbody>
                                  <% event_products.each_with_index do |event_product, ep_index| %>
                                    <tr>
                                        <td><%= ep_index + 1 %></td>
                                        <td><%= event_product.product.code %></td>
                                        <td><%= event_product.product.brand.name %></td>
                                    </tr>
                                  <% end %>
                              </tbody>
                          </table>
                        <% end %>
                    </td>
                </tr>
              <% end %>
          </tbody>
      </table>
    <% end %>
</td>
