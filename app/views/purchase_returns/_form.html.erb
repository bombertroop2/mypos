<td colspan="3">
    <div style="padding-top: 20px"></div>
    <%= form_for(@purchase_return, remote: true, html: {class: "form-horizontal"}) do |f| %>
        <div class="form-group<%= control_group_error(@purchase_return, :purchase_order_id) %>">
            <%= f.label :purchase_order_id, class: "col-sm-2 control-label" %>
              <div class="col-sm-10">
                  <%= f.select :purchase_order_id, options_from_collection_for_select(@purchase_orders, :id, :number, @purchase_return.purchase_order_id.to_s), {prompt: true}, {class: "form-control"} %>
                    <%= error_help_text(@purchase_return, :purchase_order_id) %>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <div id="purchase_order_detail">
                        <% if @purchase_return.purchase_return_products.present? %>
                          <%= render "purchase_order_details" %>
                        <% end %>
                    </div>

                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <%= f.submit "Save", id: "save-btn-return-po", class: "btn btn-primary" %>
                      <button class="btn btn-link cancel">Cancel</button>
                  </div>
              </div>
            <% end %>
        </td>

        <script>
          $(function () {
              $("#save-btn-return-po").click(function () {
                  bootbox.confirm({
                      message: "This action cannot be undone</br>Are you sure?",
                      buttons: {
                          confirm: {
                              label: '<i class="fa fa-check"></i> Confirm'
                          },
                          cancel: {
                              label: '<i class="fa fa-times"></i> Cancel'
                          }
                      },
                      callback: function (result) {
                          if (result) {
                              $("body").css('padding-right', '0px');
                              $("#new_purchase_return").submit();
                          }
                      },
                      size: "small"
                  });
                  return false;
              });

              $("#purchase_return_purchase_order_id").change(function () {
                  $.get("/purchase_returns/get_purchase_order_details", {
                      purchase_order_id: $(this).val()
                  });
              });

          });
        </script>