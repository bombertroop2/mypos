<td colspan="3">
    <div style="padding-top: 20px"></div>
    <div>

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation"<% if params[:action].eql?("new") || params[:action].eql?("create") %> class="active"<% end %>><a href="#purchase_order" aria-controls="purchase_order" role="tab" data-toggle="tab">Purchase Order</a></li>
            <li role="presentation"<% if params[:action].eql?("create_direct_purchase_return") %> class="active"<% end %>><a href="#direct_purchase" aria-controls="direct_purchase" role="tab" data-toggle="tab">Direct Purchase</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade<% if params[:action].eql?("new") || params[:action].eql?("create") %> in active<% end %>" id="purchase_order" style="padding-top: 20px">
                <%= form_for(@purchase_return, remote: true, html: {class: "form-horizontal"}) do |f| %>
                    <div class="form-group<%= control_group_error(@purchase_return, :purchase_order_id) %>">
                        <%= f.label :purchase_order_id, class: "col-sm-2 control-label" %>
                          <div class="col-sm-10">
                              <%= f.select :purchase_order_id, options_from_collection_for_select(@purchase_orders, :id, :number, @purchase_return.purchase_order_id.to_s), {prompt: true}, {class: "form-control"} %>
                                <%= error_help_text(@purchase_return, :purchase_order_id) %>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <div id="purchase_order_detail">
                                    <% if @purchase_return.purchase_return_products.present? && params[:action].eql?("create") %>
                                      <%= render "purchase_order_details" %>
                                    <% end %>
                                </div>

                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <%= f.submit "Save", id: "save-btn-return-po", class: "btn btn-primary" %>
                                  <button class="btn btn-link cancel">Cancel</button>
                              </div>
                          </div>
                        <% end %>
                    </div>
                    <div role="tabpanel" class="tab-pane fade<% if params[:action].eql?("create_direct_purchase_return") %> in active<% end %>" id="direct_purchase" style="padding-top: 20px">
                        <%= form_for(@purchase_return, url: create_direct_purchase_return_purchase_returns_path, remote: true, html: {id: "new_direct_purchase_return", class: "form-horizontal"}) do |f| %>
                            <%= f.hidden_field :direct_purchase_return %>
                            <%= f.hidden_field :direct_purchase_id %>
                            <div class="form-group<%= control_group_error(@purchase_return, :delivery_order_number) %>">
                                <%= f.label :delivery_order_number, "DO Number", class: "col-sm-2 control-label" %>
                                  <div class="col-sm-10">
                                      <%= f.select :delivery_order_number, options_from_collection_for_select(@do_numbers, :id, :delivery_order_number, @purchase_return.delivery_order_number.to_s), {prompt: true}, {class: "form-control"} %>
                                        <%= error_help_text(@purchase_return, :delivery_order_number) %>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                        <div id="direct_purchase_detail">
                                            <% if @purchase_return.purchase_return_products.present? && params[:action].eql?("create_direct_purchase_return") %>
                                              <%= render "direct_purchase_details" %>
                                            <% end %>
                                        </div>

                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                        <%= f.submit "Save", id: "save-btn-return-dp", class: "btn btn-primary" %>
                                          <button class="btn btn-link cancel">Cancel</button>
                                      </div>
                                  </div>
                                <% end %>
                            </div>
                        </div>

                    </div>    
                </td>

                <script>
                  $(function () {
                      $("#save-btn-return-po").click(function () {
                          bootbox.confirm({
                              message: "This action cannot be undone</br>Are you sure?",
                              buttons: {
                                  confirm: {
                                      label: '<i class="fa fa-check"></i> Confirm'
                                  },
                                  cancel: {
                                      label: '<i class="fa fa-times"></i> Cancel'
                                  }
                              },
                              callback: function (result) {
                                  if (result) {
                                      $("body").css('padding-right', '0px');
                                      $("#new_purchase_return").submit();
                                  }
                              },
                              size: "small"
                          });
                          return false;
                      });
                      
                      $("#save-btn-return-dp").click(function () {
                          bootbox.confirm({
                              message: "This action cannot be undone</br>Are you sure?",
                              buttons: {
                                  confirm: {
                                      label: '<i class="fa fa-check"></i> Confirm'
                                  },
                                  cancel: {
                                      label: '<i class="fa fa-times"></i> Cancel'
                                  }
                              },
                              callback: function (result) {
                                  if (result) {
                                      $("body").css('padding-right', '0px');
                                      $("#new_direct_purchase_return").submit();
                                  }
                              },
                              size: "small"
                          });
                          return false;
                      });

                      $("#purchase_return_purchase_order_id").change(function () {
                          $.get("/purchase_returns/get_purchase_order_details", {
                              purchase_order_id: $(this).val()
                          });
                      });

                      $("#purchase_return_delivery_order_number").change(function () {
                          $.get("/purchase_returns/get_direct_purchase_details", {
                              received_purchase_order_id: $(this).val()
                          });
                      });

                  });
                </script>