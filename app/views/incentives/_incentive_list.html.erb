<div class="table-responsive">
    <table class="table table-bordered table-condensed">
        <thead>
            <tr>
                <th class="text-center" colspan="4"><%= "#{@start_date.strftime("%d/%m/%Y")} - #{@end_date.strftime("%d/%m/%Y")}" %></th>
            </tr>
            <tr>
                <th class="text-center">SPG</th>
                <th class="text-center">Quantity</th>
                <th class="text-center">Net Sales</th>
                <th class="text-center">Incentive</th>
            </tr>
        </thead>
        <tbody>
            <% total_quantity = 0 %>
            <% total_net_sales = 0 %>
            <% grand_incentive = 0 %>
            <% @incentives.each do |incentive| %>
              <tr>
                  <td class="text-center"><%= "#{incentive.sales_promotion_girl_identifier} - #{incentive.sales_promotion_girl_name}" %></td>
                  <td class="text-right"><%= number_to_currency(incentive.total_quantity, :separator => "", :delimiter => ".", :unit => "", :precision => 0) %></td>
                  <td class="text-right"><%= number_to_currency(incentive.total_net_sales, :separator => ",", :delimiter => ".", :unit => "Rp", :precision => 2) %></td>
                  <%
                  total_incentive = if params[:calculate_by].eql?("Quantity")
                    incentive.total_quantity * 1500
                    else
                    if @warehouse.code.eql?("SCP1-TRND")
                      incentive.total_net_sales * (1.15 / 100)
                      elsif @warehouse.code.eql?("2YOU-0000")
                      incentive.total_net_sales * (1.8 / 100)
                      elsif @warehouse.code.eql?("PLTR-0000")
                      incentive.total_net_sales * (1.3 / 100)
                      else
                      incentive.total_net_sales * (1.5 / 100)
                    end
                    end
                %>
                  <td class="text-right"><%= number_to_currency(total_incentive, :separator => ",", :delimiter => ".", :unit => "Rp", :precision => 2) %></td>
              </tr>
              <% total_quantity += incentive.total_quantity %>
              <% total_net_sales += incentive.total_net_sales %>
              <% grand_incentive += total_incentive %>
            <% end %>
        <tfoot>
            <tr>
                <td style="text-align: right"><strong>Total</strong></td>
                <td style="text-align: right"><strong><%= number_to_currency(total_quantity, :separator => "", :delimiter => ".", :unit => "", :precision => 0) %></strong></td>
                <td style="text-align: right"><strong><%= number_to_currency(total_net_sales, :separator => ",", :delimiter => ".", :unit => "Rp", :precision => 2) %></strong></td>
                <td style="text-align: right"><strong><%= number_to_currency(grand_incentive, :separator => ",", :delimiter => ".", :unit => "Rp", :precision => 2) %></strong></td>
            </tr>
        </tfoot>
        </tbody>
    </table>
</div>