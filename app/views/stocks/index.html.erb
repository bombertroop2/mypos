<div class="page-header"><h1>Listing stocks</h1></div>

<table class="table table-condensed table-responsive table-striped">
    <tr>
        <td rowspan="2" style="text-align: center; vertical-align: middle"><strong>Warehouse</strong></td>
        <td colspan="4" style="text-align: center;"><strong>Product</strong></td>
    </tr>
    <tr>
        <td style="text-align: center;"><strong>Code</strong></td>
        <td style="text-align: center;"><strong>Color</strong></td>
        <td style="text-align: center;"><strong>Size</strong></td>
        <td style="text-align: center;"><strong>Quantity</strong></td>
    </tr>

    <% @stocks.each do |stock| %>
      <% stock.stock_products.each_with_index do |stock_product, stock_product_index| %>
        <% stock_product.stock_details.each_with_index do |stock_detail, index| %>
          <tr>
              <% if index == 0 && stock_product_index == 0 %>
                <td rowspan="<%= stock.stock_details.size %>" style="vertical-align: middle" align="center"><%= stock.warehouse.name if stock.warehouse %></td>
              <% end %>
              <% if index == 0 %>
                <td rowspan="<%= stock_product.stock_details.size %>" style="vertical-align: middle" align="center"><%= stock_product.product.code if stock_product.product %></td>
              <% end %>
              <td align="center"><%= stock_detail.color.name if stock_detail.color %></td>
              <td align="center"><%= stock_detail.size.size if stock_detail.size %></td>
              <td align="right"><%= stock_detail.quantity %> pcs</td>
          </tr>
        <% end %>
      <% end %>
    <% end %>

</table>



