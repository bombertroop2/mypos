<!DOCTYPE html>
<html>
    <head>
        <title>
            <% unless params[:controller].eql?("welcome") %>
              DUOS - <%= !params[:controller].eql?("stocks") ? params[:controller].humanize.titleize : "Stock Balance" %>
            <% else %>
              DUOS
            <% end %>
        </title>
        <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
<%#= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
        <%= csrf_meta_tags %>
    </head>
    <body class="<%= controller_name != 'sessions' ? "nav-md" : "login" %>">
        <% if controller_name != 'sessions' %>
          <div id="json-overlay" style="display: none"></div>
          <div class="container body">
              <div class="main_container">
                  <div class="col-md-3 left_col">
                      <div class="left_col scroll-view">
                          <div class="navbar nav_title" style="border: 0;">
                              <%= link_to raw("<i class=\"fa fa-paw\"></i> <span>DUOS</span>"), root_path, class: "site_title", method: :get %>
                            </div>

                            <div class="clearfix"></div>

                            <!-- menu profile quick info -->
                            <div class="profile clearfix">
                                <div class="profile_pic">
                                    <%= image_tag(image_url("img.jpg"), class: "img-circle profile_img") %>
                                  </div>
                                  <div class="profile_info">
                                      <span>Welcome,</span>
                                      <h2><%= current_user.name %></h2>
                                  </div>
                              </div>
                              <!-- /menu profile quick info -->

                              <br />

                              <!-- sidebar menu -->
                              <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                                  <div class="menu_section">
                                      <!--<h3>General</h3>-->
                                      <ul class="nav side-menu">
                                          <li><a><i class="fa fa-cubes"></i> Product Master <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <% if can? :read, Brand %>
                                                    <li><%= link_to "Brands", brands_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, Model %>
                                                    <li><%= link_to "Models", models_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, GoodsType %>
                                                    <li><%= link_to "Goods Types", goods_types_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, Color %>
                                                    <li><%= link_to "Colors", colors_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, SizeGroup %>
                                                    <li><%= link_to "Size Groups", size_groups_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, Product %>
                                                    <li><%= link_to "Products", products_path, method: :get %></li>
                                                  <% end %>
                                              </ul>
                                          </li>
                                          <li><a><i class="fa fa-tag"></i> Price Control <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <% if can? :read, PriceCode %>
                                                    <li><%= link_to "Price Codes", price_codes_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, CostList %>
                                                    <li><%= link_to "Costs & Prices", "/cost_prices", method: :get %></li>
                                                  <% end %>
                                              </ul>
                                          </li>
                                          <li><a><i class="fa fa-industry"></i> Warehouse Control <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <% if can? :read, SalesPromotionGirl %>
                                                    <li><%= link_to "Sales Promotion Girls", sales_promotion_girls_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, Supervisor %>
                                                    <li class="<%= params[:controller].eql?("area_managers") ? "active" : "" %>"><%= link_to "Area Managers", area_managers_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, Warehouse %>
                                                    <li class="<%= params[:controller].eql?("warehouses") ? "active" : "" %>"><%= link_to "Warehouses", warehouses_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, Region %>
                                                    <li class="<%= params[:controller].eql?("regions") ? "active" : "" %>"><%= link_to "Regions", regions_path, method: :get %></li>
                                                  <% end %>
                                              </ul>
                                          </li>
                                          <li><a><i class="fa fa-exchange"></i> Transactions <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <% if can? :read, Vendor %>
                                                    <li><%= link_to "Vendors", vendors_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, PurchaseOrder %>
                                                    <li><%= link_to "Purchase Orders", purchase_orders_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, ReceivedPurchaseOrder %>
                                                    <li><%= link_to "Receiving", receiving_index_path, method: :get %></li>
                                                  <% end %>                      
                                                  <% if can? :read, PurchaseReturn %>
                                                    <li><%= link_to "Purchase Returns", purchase_returns_path, method: :get %></li>
                                                  <% end %>                          
                                                  <% if can? :read, AccountPayable %>
                                                    <li><%= link_to "Account Payables", account_payables_path, method: :get %></li>
                                                  <% end %>                          
                                              </ul>
                                          </li>
                                          <li><a><i class="fa fa-dropbox"></i> Booking Control <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <% if can? :read, OrderBooking %>
                                                    <li><%= link_to "Order Bookings", order_bookings_path, method: :get %></li>
                                                  <% end %>                          
                                                  <% if can? :read, Shipment %>
                                                    <li><%= link_to "Shipments", shipments_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, Courier %>
                                                    <li><%= link_to "Couriers", couriers_path, method: :get %></li>
                                                  <% end %>                          
                                              </ul>
                                          </li>
                                          <li><a><i class="fa fa-file"></i> Reports <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <% if can? :read, Stock %>
                                                    <li><%= link_to "Stock Balance", stocks_path, method: :get %></li>
                                                  <% end %>
                                              </ul>
                                          </li>
                                          <li><a><i class="fa fa-download"></i> Shipment Receipts <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <% if can? :read, ShipmentReceipt %>
                                                    <li><%= link_to "Warehouse to Store", shipment_receipts_path, method: :get %></li>
                                                  <% end %>
                                                  <li><a>Store to Store</a></li>
                                                  <li><a>Store to Warehouse</a></li>
                                              </ul>
                                          </li>
                                          <li><a><i class="fa fa-recycle"></i> Stock Mutations <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <% if can? :read, StockMutation %>
                                                    <li><%= link_to "Store to Store", stock_mutations_path, method: :get %></li>
                                                  <% end %>
                                                  <li><a>Store to Warehouse</a></li>
                                              </ul>
                                          </li>
                                          <li><a><i class="fa fa-cogs"></i> Settings <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <% if can? :read, Email %>
                                                    <li><%= link_to "Emails", emails_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :read, User %>
                                                    <li><%= link_to "Users", users_path, method: :get %></li>
                                                  <% end %>
                                                  <% if can? :manage, AvailableMenu %>
                                                    <li><%= link_to "Available Menus", new_available_menu_path, method: :get %></li>
                                                  <% end %>
                                              </ul>
                                          </li>
                                      </ul>
                                  </div>
                                  <!--<div class="menu_section">
                                      <h3>Live On</h3>
                                      <ul class="nav side-menu">
                                          <li><a><i class="fa fa-bug"></i> Additional Pages <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <li><a href="e_commerce.html">E-commerce</a></li>
                                                  <li><a href="projects.html">Projects</a></li>
                                                  <li><a href="project_detail.html">Project Detail</a></li>
                                                  <li><a href="contacts.html">Contacts</a></li>
                                                  <li><a href="profile.html">Profile</a></li>
                                              </ul>
                                          </li>
                                          <li><a><i class="fa fa-windows"></i> Extras <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <li><a href="page_403.html">403 Error</a></li>
                                                  <li><a href="page_404.html">404 Error</a></li>
                                                  <li><a href="page_500.html">500 Error</a></li>
                                                  <li><a href="plain_page.html">Plain Page</a></li>
                                                  <li><a href="login.html">Login Page</a></li>
                                                  <li><a href="pricing_tables.html">Pricing Tables</a></li>
                                              </ul>
                                          </li>
                                          <li><a><i class="fa fa-sitemap"></i> Multilevel Menu <span class="fa fa-chevron-down"></span></a>
                                              <ul class="nav child_menu">
                                                  <li><a href="#level1_1">Level One</a>
                                                  <li><a>Level One<span class="fa fa-chevron-down"></span></a>
                                                      <ul class="nav child_menu">
                                                          <li class="sub_menu"><a href="level2.html">Level Two</a>
                                                          </li>
                                                          <li><a href="#level2_1">Level Two</a>
                                                          </li>
                                                          <li><a href="#level2_2">Level Two</a>
                                                          </li>
                                                      </ul>
                                                  </li>
                                                  <li><a href="#level1_2">Level One</a>
                                                  </li>
                                              </ul>
                                          </li>                  
                                          <li><a href="javascript:void(0)"><i class="fa fa-laptop"></i> Landing Page <span class="label label-success pull-right">Coming Soon</span></a></li>
                                      </ul>
                                  </div>-->

                              </div>
                              <!-- /sidebar menu -->

                              <!-- /menu footer buttons -->
                              <div class="sidebar-footer hidden-small">
                                  <a data-toggle="tooltip" data-placement="top" title="Settings">
                                      <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
                                  </a>
                                  <a data-toggle="tooltip" data-placement="top" title="FullScreen">
                                      <span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span>
                                  </a>
                                  <a data-toggle="tooltip" data-placement="top" title="Lock">
                                      <span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
                                  </a>
                                  <!--
                                  <a data-toggle="tooltip" data-placement="top" title="Logout" href="login.html">
                                      <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
                                  </a>-->
                                  <%= link_to(raw("<span class=\"glyphicon glyphicon-off\" aria-hidden=\"true\"></span>"), destroy_user_session_path, :method => :delete, title: "Logout", :"data-toggle" => "tooltip", :"data-placement" => "top") %>
                              </div>
                              <!-- /menu footer buttons -->
                          </div>
                      </div>

                      <!-- top navigation -->
                      <div class="top_nav">
                          <div class="nav_menu">
                              <nav>
                                  <div class="nav toggle">
                                      <a id="menu_toggle"><i class="fa fa-bars"></i></a>
                                  </div>

                                  <ul class="nav navbar-nav navbar-right">
                                      <li class="">
                                          <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                              <%= image_tag(image_url("img.jpg")) %><%= current_user.name %>
                                              <span class=" fa fa-angle-down"></span>
                                          </a>
                                          <ul class="dropdown-menu dropdown-usermenu pull-right">
                                              <!--<li><a href="javascript:;"> Profile</a></li>
                                              <li>
                                                  <a href="javascript:;">
                                                      <span class="badge bg-red pull-right">50%</span>
                                                      <span>Settings</span>
                                                  </a>
                                              </li>
                                              <li><a href="javascript:;">Help</a></li>-->
                                              <li><%= link_to(raw("<i class=\"fa fa-sign-out pull-right\"></i> Log Out"), destroy_user_session_path, :method => :delete) %></li>
                                          </ul>
                                      </li>

                                      <%= render "notifications/notification_center", {notifications: @notifications, unnotified_notification_count: @unnotified_notification_count} %>

                                  </ul>
                              </nav>
                          </div>
                      </div>
                      <!-- /top navigation -->

                      <!-- page content -->
                      <div class="right_col" role="main">
                          <%= yield %>
                      </div>
                      <!-- /page content -->

                      <!-- footer content -->
                      <footer>
                          <div class="pull-right">
                              Gentelella - Bootstrap Admin Template by <a href="https://colorlib.com">Colorlib</a>
                          </div>
                          <div class="clearfix"></div>
                      </footer>
                      <!-- /footer content -->
                  </div>
              </div>

              <%= javascript_include_tag "application", "data-turbolinks-track" => true %>

              <script>
                $(function () {
      <% @notifications.each do |notification| %>
                      $("#notification_<%= notification.id %>").click(function () {
                          $.get("/notifications/<%= notification.id %>").done(function (data) {
                              bootbox.alert({
                                  title: "Notification",
                                  message: data
                              });
                          });
                      });
      <% end %>
      <% if controller_name.eql?("shipments") %>
                      $("#search-shipment-btn").click(function () {
                          $("#filter_delivery_date").val($("#filter-delivery-date").val());
                          $("#filter_received_date").val($("#filter-received-date").val());
                          $("#filter_string").val($("#filter-string").val());
                          $("#filter_destination_warehouse").val($("#filter-destination-warehouse").val());
                          $(".smart-listing-controls").submit();
                      });
      <% elsif controller_name.eql?("cost_prices") %>
                      $("#search-cost-btn").click(function () {
                          $("#filter_effective_date").val($("#filter-effective-date").val());
                          $("#filter_product_code").val($("#filter-product-code").val());
        <% if current_user.has_managerial_role? %>
                            $("#filter_cost").val($("#search-cost").val());
        <% end %>
                          //$(".smart-listing-controls").html($("#search-form-container").html());
                          $(".smart-listing-controls").submit();
                      });
      <% elsif controller_name.eql?("receiving") %>
                      $("#search-ro-btn").click(function () {
                          $("#filter_receiving_date").val($("#filter-receiving-date").val());
                          $("#filter_string").val($("#filter-string").val());
                          $(".smart-listing-controls").submit();
                      });
      <% elsif controller_name.eql?("account_payables") %>
                      $("#search-ap-btn").click(function () {
                          $("#filter_payment_date").val($("#filter-payment-date").val());
                          $("#filter_string").val($("#filter-string").val());
                          $(".smart-listing-controls").submit();
                      });
      <% elsif controller_name.eql?("users") %>
                      $("#search-user-btn").click(function () {
                          $("#filter_gender").val($("#filter-gender").val());
                          $("#filter_role").val($("#filter-role").val());
                          $("#filter_string").val($("#filter-string").val());
                          $(".smart-listing-controls").submit();
                      });
      <% elsif controller_name.eql?("shipment_receipts") %>
                      $("#search-shipment-receipt-btn").click(function () {
                          $("#filter_received_date").val($("#filter-received-date").val());
                          $("#filter_string").val($("#filter-string").val());
                          $(".smart-listing-controls").submit();
                      });
      <% elsif controller_name.eql?("stock_mutations") %>
                      $("#search-stock-mutation-btn").click(function () {
                          $("#filter_delivery_date").val($("#filter-delivery-date").val());
                          $("#filter_received_date").val($("#filter-received-date").val());
                          $("#filter_string").val($("#filter-string").val());
                          //$("#filter_destination_warehouse").val($("#filter-destination-warehouse").val());
                          $(".smart-listing-controls").submit();
                      });
      <% end %>
                });
              </script>
            <% else %>
              <div>
                  <!--<a class="hiddenanchor" id="signup"></a>-->
                  <!--<a class="hiddenanchor" id="signin"></a>-->

                  <div class="login_wrapper">
                      <div class="animate form login_form">
                          <section class="login_content">
                              <% if alert && alert.include?("Invalid") %>
                                <div class="alert alert-warning alert-dismissible fade in" role="alert">
                                    <%= alert %>
                                </div>                            
                              <% end %>
                              <%= yield %>
                          </section>
                      </div>

                      <!--<div id="register" class="animate form registration_form">
                          <section class="login_content">
                              <form>
                                  <h1>Create Account</h1>
                                  <div>
                                      <input type="text" class="form-control" placeholder="Username" required="" />
                                  </div>
                                  <div>
                                      <input type="email" class="form-control" placeholder="Email" required="" />
                                  </div>
                                  <div>
                                      <input type="password" class="form-control" placeholder="Password" required="" />
                                  </div>
                                  <div>
                                      <a class="btn btn-default submit" href="index.html">Submit</a>
                                  </div>

                                  <div class="clearfix"></div>

                                  <div class="separator">
                                      <p class="change_link">Already a member ?
                                          <a href="#signin" class="to_register"> Log in </a>
                                      </p>

                                      <div class="clearfix"></div>
                                      <br />

                                      <div>
                                          <h1><i class="fa fa-paw"></i> Gentelella Alela!</h1>
                                          <p>©2016 All Rights Reserved. Gentelella Alela! is a Bootstrap 3 template. Privacy and Terms</p>
                                      </div>
                                  </div>
                              </form>
                          </section>
                      </div>-->
                  </div>
              </div>
            <% end %>
        </body>
    </html>
